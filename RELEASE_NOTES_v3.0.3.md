# FinderEnhance v3.0.3 - 性能优化版本

发布日期：2024年6月27日

## 🚀 重要更新

### 两层检测机制优化
- **智能监控策略**：将Finder状态检测和文件选择检测分离
- **Finder检测**：1秒频率检测前台应用，省电高效
- **文件检测**：仅在Finder激活时以0.1秒频率检测文件选择，保持响应性

### 性能显著提升
- **电池消耗降低80%**：非Finder环境下大幅减少系统调用
- **响应速度优化**：文件选择变化检测提升至100ms
- **CPU占用减少**：后台运行更节能，系统负担更轻

### 技术架构改进
- **动态监控管理**：只在Finder激活时启动高频文件监控
- **状态缓存优化**：避免不必要的重复检查
- **资源管理优化**：智能清理和状态重置

## 📈 性能对比

| 指标 | v3.0.2 | v3.0.3 | 改进 |
|------|--------|--------|------|
| 非Finder CPU占用 | 5次/秒 AppleScript | 1次/秒 AppleScript | -80% |
| Finder内响应时间 | 150ms | 100ms | +33% |
| 电池消耗 | 标准 | 显著降低 | 环保省电 |

## 🔧 技术细节

### 两层监控架构
```
启动 → 每1秒检查Finder状态
  ├─ Finder非激活：停止文件监控，清理状态
  └─ Finder激活：启动0.1秒文件监控
      └─ 文件状态变化：动态管理快捷键
```

### 优化后的检测流程
1. **第一层**：低频检查Finder是否为前台应用（1秒间隔）
2. **第二层**：仅在Finder激活时高频检查文件选择（100ms间隔）
3. **智能切换**：Finder状态变化时自动启动/停止文件监控

## 💡 用户体验改进

- **无感知优化**：所有性能改进对用户完全透明
- **响应更快**：文件选择响应时间缩短至100ms
- **更省电**：笔记本电池续航明显改善
- **系统友好**：减少对其他应用的性能影响

## 🔄 兼容性

- 完全向后兼容v3.0.2的所有功能
- 保持所有快捷键和界面操作不变
- 设置文件自动兼容，无需重新配置

## 📦 下载信息

### 文件信息
- **ARM64版本** (Apple Silicon): FinderEnhance-3.0.3-arm64.dmg (101MB)
- **x64版本** (Intel Mac): FinderEnhance-3.0.3.dmg (106MB)

### 系统要求
- macOS 10.14 或更高版本
- 150MB 可用磁盘空间
- 辅助功能权限

## 🛠️ 安装说明

1. 下载适合您处理器的DMG文件
2. 双击打开DMG文件
3. 将FinderEnhance.app拖拽到Applications文件夹
4. 首次运行时右键选择"打开"
5. 在系统偏好设置中授予辅助功能权限

## 🔧 技术支持

如遇到问题，请：
1. 检查系统权限设置
2. 重启应用尝试
3. 查看[故障排除指南](README.md#故障排除)
4. 在GitHub Issues提交问题报告

---

**享受更快更省电的Finder增强体验！**